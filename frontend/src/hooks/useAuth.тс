// import { useState, useCallback } from 'react';
// import { useCookies } from 'react-cookie';
// import { login, register, logout, refresh } from '../api/authService';
// import { AuthUser, LoginData } from '../types/authTypes';
//
// export const useAuth = () => {
//   const [cookies, setCookie, removeCookie] = useCookies(['accessToken', 'refreshToken']);
//   const [user, setUser] = useState<AuthUser | null>(null);
//   const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);
//
//   const checkAuth = useCallback(async () => {
//     if (cookies.accessToken) {
//       // Здесь можно добавить проверку срока действия токена
//       setIsAuthenticated(true);
//       // Можно добавить запрос для получения данных пользователя
//     } else if (cookies.refreshToken) {
//       try {
//         const deviceId = localStorage.getItem('deviceId');
//         if (deviceId) {
//           const { accessToken, refreshToken } = await refresh(cookies.refreshToken, deviceId);
//           setAuthTokens(accessToken, refreshToken);
//           setIsAuthenticated(true);
//         }
//       } catch (error) {
//         clearAuth();
//       }
//     }
//   }, [cookies.accessToken, cookies.refreshToken]);
//
//   const setAuthTokens = (accessToken: string, refreshToken: string) => {
//     setCookie('accessToken', accessToken, { path: '/', httpOnly: true, secure: true });
//     setCookie('refreshToken', refreshToken, { path: '/', httpOnly: true, secure: true });
//   };
//
//   const clearAuth = () => {
//     removeCookie('accessToken', { path: '/' });
//     removeCookie('refreshToken', { path: '/' });
//     setIsAuthenticated(false);
//     setUser(null);
//   };
//
//   const handleLogin = async (loginData: LoginData) => {
//     const deviceId = localStorage.getItem('deviceId');
//     if (!deviceId) throw new Error('Device ID not found');
//
//     const { accessToken, refreshToken, user } = await login({ ...loginData, deviceId });
//     setAuthTokens(accessToken, refreshToken);
//     setUser(user);
//     setIsAuthenticated(true);
//   };
//
//   const handleRegister = async (registerData: LoginData) => {
// //     const deviceId = localStorage.getItem('deviceId');
// //     if (!deviceId) throw new Error('Device ID not found');
//
//     const { accessToken, refreshToken, user } = await register({ ...registerData });
//     setAuthTokens(accessToken, refreshToken);
//     setUser(user);
//     setIsAuthenticated(true);
//   };
//
//   const handleLogout = async () => {
//     const deviceId = localStorage.getItem('deviceId');
//     if (deviceId && cookies.refreshToken) {
//       await logout(cookies.refreshToken, deviceId);
//     }
//     clearAuth();
//   };
//
//   return {
//     user,
//     isAuthenticated,
//     checkAuth,
//     login: handleLogin,
//     register: handleRegister,
//     logout: handleLogout,
//   };
// };